{"ast":null,"code":"var _jsxFileName = \"E:\\\\DanfeOnlineStore\\\\client\\\\src\\\\components\\\\mainpages\\\\order\\\\Order.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState, useEffect } from 'react';\nimport { GlobalState } from '../../../GlobalState';\nimport CheckoutSteps from '../checkoutsteps/CheckoutSteps';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Order() {\n  _s();\n\n  const state = useContext(GlobalState);\n  const [cart, setCart] = state.userAPI.cart;\n  const [token] = state.token;\n  const [total, setTotal] = useState(0);\n  const [checkout, setCheckout] = state.orderAPI.checkout;\n  const [paymentmethod, setPaymentmethod] = state.orderAPI.paymentmethod;\n  useEffect(() => {\n    const getTotal = () => {\n      const total = cart.reduce((prev, item) => {\n        return prev + item.price * item.quantity;\n      }, 0);\n      setTotal(total);\n    };\n\n    getTotal();\n  }, [cart]);\n\n  const addToCart = async cart => {\n    await axios.patch('/user/addcart', {\n      cart\n    }, {\n      headers: {\n        Authorization: token\n      }\n    });\n  };\n\n  const increment = id => {\n    cart.forEach(item => {\n      if (item._id === id) {\n        item.quantity += 1;\n      }\n    });\n    setCart([...cart]);\n    addToCart(cart);\n  };\n\n  const decrement = id => {\n    cart.forEach(item => {\n      if (item._id === id) {\n        item.quantity === 1 ? item.quantity = 1 : item.quantity -= 1;\n      }\n    });\n    setCart([...cart]);\n    addToCart(cart);\n  };\n\n  const removeProduct = id => {\n    if (window.confirm(\"Do you want to delete this product?\")) {\n      cart.forEach((item, index) => {\n        if (item._id === id) {\n          cart.splice(index, 1);\n        }\n      });\n      setCart([...cart]);\n      addToCart(cart);\n    }\n  };\n\n  const initaialState = {\n    fullname: checkout.fullname,\n    mobilenumber: checkout.mobilenumber,\n    address: checkout.address,\n    paymethod: paymentmethod.paymethod,\n    cart: cart.map(product => product.title),\n    totalprice: \" \"\n  };\n  const [placeorder, setPlaceorder] = useState(initaialState);\n\n  const palceOrder = async () => {\n    if (window.confirm(\"Do you want to place an order?\")) {\n      try {\n        await axios.post('/api/placeorder', { ...placeorder\n        });\n      } catch (err) {\n        alert(err.response.data.msg);\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(CheckoutSteps, {\n      step1: true,\n      step2: true,\n      step3: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"User Email.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"order-summary\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"column-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Shipping Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Name:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 27\n          }, this), \" \", checkout.fullname]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Contact:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 27\n          }, this), \" \", checkout.mobilenumber]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Address:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 26\n          }, this), \" \", checkout.address, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Payment Method:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 27\n          }, this), \" \", paymentmethod.paymethod]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Order Items:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 27\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }, this), cart.map(product => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"items\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-1\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: product.images.url,\n              alt: \"image\",\n              className: \"smallimage\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 52\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: product.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              children: [\"Rs. \", product.price * product.quantity]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"count\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => decrement(product._id),\n                children: \" - \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: product.quantity\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => increment(product._id),\n                children: \" + \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"remove\",\n              onClick: () => removeProduct(product._id),\n              children: \"Remove\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"column-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Order Summary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Net price\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 27\n          }, this), \" Rs. \", total, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Shipping Cost \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 27\n          }, this), \" Rs. 150*  \", /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"( For orders inside valley, shipping will be free.)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 61\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Total Cost \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 27\n          }, this), \" Rs. \", total + 150, \" /- \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: palceOrder,\n          disabled: cart.length === 0,\n          children: \"Place an Order\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"(* in shipping cost represent it may vary with your delivery location.)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Order, \"S08+lHrj99/tl5/z5Wb0gNg4040=\");\n\n_c = Order;\nexport default Order;\n\nvar _c;\n\n$RefreshReg$(_c, \"Order\");","map":{"version":3,"sources":["E:/DanfeOnlineStore/client/src/components/mainpages/order/Order.js"],"names":["React","useContext","useState","useEffect","GlobalState","CheckoutSteps","axios","Order","state","cart","setCart","userAPI","token","total","setTotal","checkout","setCheckout","orderAPI","paymentmethod","setPaymentmethod","getTotal","reduce","prev","item","price","quantity","addToCart","patch","headers","Authorization","increment","id","forEach","_id","decrement","removeProduct","window","confirm","index","splice","initaialState","fullname","mobilenumber","address","paymethod","map","product","title","totalprice","placeorder","setPlaceorder","palceOrder","post","err","alert","response","data","msg","images","url","length"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from 'react'\r\nimport { GlobalState } from '../../../GlobalState'\r\nimport CheckoutSteps from '../checkoutsteps/CheckoutSteps'\r\nimport axios from 'axios'\r\n\r\n\r\n\r\nfunction Order() {\r\n\r\n\r\n    const state = useContext(GlobalState)\r\n    const [cart, setCart] = state.userAPI.cart\r\n    const [token] = state.token\r\n    const [total, setTotal] = useState(0)\r\n    const [checkout, setCheckout] = state.orderAPI.checkout\r\n    const [paymentmethod, setPaymentmethod] = state.orderAPI.paymentmethod\r\n\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        const getTotal = () => {\r\n            const total = cart.reduce((prev, item) => {\r\n                return prev + (item.price * item.quantity)\r\n            }, 0)\r\n\r\n            setTotal(total)\r\n        }\r\n\r\n        getTotal()\r\n\r\n    }, [cart])\r\n\r\n    const addToCart = async (cart) => {\r\n        await axios.patch('/user/addcart', { cart }, {\r\n            headers: { Authorization: token }\r\n        })\r\n    }\r\n\r\n\r\n    const increment = (id) => {\r\n        cart.forEach(item => {\r\n            if (item._id === id) {\r\n                item.quantity += 1\r\n            }\r\n        })\r\n\r\n        setCart([...cart])\r\n        addToCart(cart)\r\n    }\r\n\r\n    const decrement = (id) => {\r\n        cart.forEach(item => {\r\n            if (item._id === id) {\r\n                item.quantity === 1 ? item.quantity = 1 : item.quantity -= 1\r\n            }\r\n        })\r\n\r\n        setCart([...cart])\r\n        addToCart(cart)\r\n    }\r\n\r\n    const removeProduct = id => {\r\n        if (window.confirm(\"Do you want to delete this product?\")) {\r\n            cart.forEach((item, index) => {\r\n                if (item._id === id) {\r\n                    cart.splice(index, 1)\r\n                }\r\n            })\r\n\r\n            setCart([...cart])\r\n            addToCart(cart)\r\n        }\r\n    }\r\n\r\n\r\n\r\n    const initaialState = {\r\n        fullname: checkout.fullname,\r\n        mobilenumber: checkout.mobilenumber,\r\n        address: checkout.address,\r\n        paymethod: paymentmethod.paymethod,\r\n        cart: cart.map(product => (product.title)),\r\n        totalprice: \" \"\r\n    }\r\n\r\n    const [placeorder, setPlaceorder] = useState(initaialState)\r\n\r\n    const palceOrder = async () => {\r\n        if (window.confirm(\"Do you want to place an order?\")) {\r\n            try {\r\n\r\n                await axios.post('/api/placeorder', { ...placeorder });\r\n\r\n\r\n\r\n            } catch (err) {\r\n                alert(err.response.data.msg)\r\n            }\r\n\r\n        }\r\n    }\r\n    return (\r\n        <>\r\n\r\n            <CheckoutSteps step1 step2 step3 ></CheckoutSteps>\r\n            <div>User Email.</div>\r\n            <div className=\"order-summary\">\r\n\r\n\r\n                <div className=\"column-1\">\r\n                    <h2>Shipping Details</h2>\r\n                    <div>\t<h4>Name:</h4> {checkout.fullname}</div>\r\n                    <div>\t<h4>Contact:</h4> {checkout.mobilenumber}</div>\r\n                    <div><h4>Address:</h4> {checkout.address} </div>\r\n                    <div>\t<h4>Payment Method:</h4> {paymentmethod.paymethod}</div>\r\n                    <div>\t<h3>Order Items:</h3> </div>\r\n                    {cart.map(product => (\r\n                        <div className=\"items\">\r\n                            <div className=\"col-1\"><img src={product.images.url} alt=\"image\" className=\"smallimage\" ></img></div>\r\n                            <div className=\"col-2\">\r\n                                <h4>{product.title}</h4>\r\n                                <h4>Rs. {product.price * product.quantity}</h4>\r\n                                <div className=\"count\">\r\n                                    <button onClick={() => decrement(product._id)}> - </button>\r\n                                    <span>{product.quantity}</span>\r\n                                    <button onClick={() => increment(product._id)}> + </button>\r\n                                </div>\r\n\r\n                                <div className=\"remove\"\r\n                                    onClick={() => removeProduct(product._id)}>\r\n                                    Remove\r\n                            </div>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n\r\n                </div>\r\n                <div className=\"column-2\">\r\n                    <h2>Order Summary</h2>\r\n                    <div> <h4>Net price</h4> Rs. {total} </div>\r\n                    <div>\t<h4>Shipping Cost </h4> Rs. 150*  <p>( For orders inside valley, shipping will be free.)</p> </div>\r\n                    <div>\t<h4>Total Cost </h4> Rs. {(total) + 150} /- </div>\r\n                    <button onClick={palceOrder} disabled={cart.length === 0}>Place an Order</button>\r\n                    <p>(* in shipping cost represent it may vary with your delivery location.)</p>\r\n\r\n                </div>\r\n            </div>\r\n\r\n        </>\r\n\r\n    )\r\n}\r\n\r\nexport default Order\r\n"]},"metadata":{},"sourceType":"module"}